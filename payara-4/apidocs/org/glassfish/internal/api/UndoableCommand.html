<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Tue Aug 01 10:28:31 BST 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UndoableCommand (Payara Project 4.1.2.173 API)</title>
<meta name="date" content="2017-08-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UndoableCommand (Payara Project 4.1.2.173 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UndoableCommand.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/glassfish/internal/api/Target.html" title="class in org.glassfish.internal.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/glassfish/internal/api/Visibility.html" title="annotation in org.glassfish.internal.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/glassfish/internal/api/UndoableCommand.html" target="_top">Frames</a></li>
<li><a href="UndoableCommand.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.glassfish.internal.api</div>
<h2 title="Interface UndoableCommand" class="title">Interface UndoableCommand</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../org/glassfish/api/admin/AdminCommand.html" title="interface in org.glassfish.api.admin">AdminCommand</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">UndoableCommand</span>
extends <a href="../../../../org/glassfish/api/admin/AdminCommand.html" title="interface in org.glassfish.api.admin">AdminCommand</a></pre>
<div class="block">Interface that augment the AdminCommand responsibilities by adding the ability
 to undo a previously successful execution of an administrative command.

 <p>The ability to rollback is not meant to be used as an exception handling
 mechanism while in the <a href="../../../../org/glassfish/api/admin/AdminCommand.html#execute-org.glassfish.api.admin.AdminCommandContext-"><code>AdminCommand.execute(AdminCommandContext)</code></a> invocation.
 The ability to rollback is meant for undoing a successful command execution that
 need to be roll-backed for reasons outside of the knowledge of the command
 implementation.

 <p>Roll-backing can be very useful in clustering mode where actions can be performed
 successfully on some instances but fail on others necessitating to rollback the
 entire set of instances to a state previous to the action execution.

 <p>The implementations of this interface must retain any pertinent information necessary
 to undo the command within its instance context. Therefore all UndoableCommand implementations
 must have a <code>PerLookup</code> scope otherwise the system will flag it
 as an error and will refuse to execute the command.

 <p>An undo-able command has a slightly more complicated set of phases execution as compared
 to the AdminCommand.

 <p>During the first phase, called the prepare phase, the framework will call
 this command prepare method as well as all supplemented commands prepare methods (if such
 supplemented commands implement the UndoableCommand interface). If the prepare phase is
 not successful, the command execution stops here and the command feedback is returned to the
 initiator.

 <p>Once the prepare phase has succeeded, the normal <a href="../../../../org/glassfish/api/admin/AdminCommand.html#execute-org.glassfish.api.admin.AdminCommandContext-"><code>AdminCommand.execute(AdminCommandContext)</code></a>
 method is invoked (and any supplemented methods).

 <p>If the framework is electing that successful commands execution need to be rolled back, it will
 call the <code>#undo(AdminCommandContext, ParameterMap, List<Server>)</code> method on the same instance that was used for the
 <a href="../../../../org/glassfish/api/admin/AdminCommand.html#execute-org.glassfish.api.admin.AdminCommandContext-"><code>AdminCommand.execute(AdminCommandContext)</code></a> invocation, as well as any supplemented commands that implement
 this interface.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Jerome Dochez</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../org/glassfish/api/ActionReport.ExitCode.html" title="enum in org.glassfish.api">ActionReport.ExitCode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/glassfish/internal/api/UndoableCommand.html#prepare-org.glassfish.api.admin.AdminCommandContext-org.glassfish.api.admin.ParameterMap-">prepare</a></span>(<a href="../../../../org/glassfish/api/admin/AdminCommandContext.html" title="interface in org.glassfish.api.admin">AdminCommandContext</a>&nbsp;context,
       <a href="../../../../org/glassfish/api/admin/ParameterMap.html" title="class in org.glassfish.api.admin">ParameterMap</a>&nbsp;parameters)</code>
<div class="block">Checks whether the command execution has a chance of success before the execution is
 attempted.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/glassfish/internal/api/UndoableCommand.html#undo-org.glassfish.api.admin.AdminCommandContext-org.glassfish.api.admin.ParameterMap-java.util.List-">undo</a></span>(<a href="../../../../org/glassfish/api/admin/AdminCommandContext.html" title="interface in org.glassfish.api.admin">AdminCommandContext</a>&nbsp;context,
    <a href="../../../../org/glassfish/api/admin/ParameterMap.html" title="class in org.glassfish.api.admin">ParameterMap</a>&nbsp;parameters,
    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../com/sun/enterprise/config/serverbeans/Server.html" title="interface in com.sun.enterprise.config.serverbeans">Server</a>&gt;&nbsp;instances)</code>
<div class="block">Undo a previously successful execution of the command implementation.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.glassfish.api.admin.AdminCommand">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.glassfish.api.admin.<a href="../../../../org/glassfish/api/admin/AdminCommand.html" title="interface in org.glassfish.api.admin">AdminCommand</a></h3>
<code><a href="../../../../org/glassfish/api/admin/AdminCommand.html#execute-org.glassfish.api.admin.AdminCommandContext-">execute</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="prepare-org.glassfish.api.admin.AdminCommandContext-org.glassfish.api.admin.ParameterMap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre><a href="../../../../org/glassfish/api/admin/IfFailure.html" title="annotation in org.glassfish.api.admin">@IfFailure</a>(<a href="../../../../org/glassfish/api/admin/IfFailure.html#value--">value</a>=<a href="../../../../org/glassfish/api/admin/FailurePolicy.html#Error">Error</a>)
<a href="../../../../org/glassfish/api/ActionReport.ExitCode.html" title="enum in org.glassfish.api">ActionReport.ExitCode</a>&nbsp;prepare(<a href="../../../../org/glassfish/api/admin/AdminCommandContext.html" title="interface in org.glassfish.api.admin">AdminCommandContext</a>&nbsp;context,
                                                      <a href="../../../../org/glassfish/api/admin/ParameterMap.html" title="class in org.glassfish.api.admin">ParameterMap</a>&nbsp;parameters)</pre>
<div class="block">Checks whether the command execution has a chance of success before the execution is
 attempted. This could be useful in clustering environment where you must check certain
 pre-conditions before attempting to run an administrative change.

 <p>For instance, the change-admin-password should probably not be attempted if all the
 servers instances are on-line and can be notified of the change.

 <p>No changes to the configuration should be made within the implementation of the
 prepare method since <code>#undo(AdminCommandContext, ParameterMap, List<Server>)</code> will not be called if the command
 execution stops at the prepare phase.

 <p>Note that if, as part of prepare, remote instances have to be contacted, then it is the responsibility of
 the command implementation to invoke remote instaces for such verification.

 The framework will call prepare() method in DAS before execution of the main command
 and the execution of the main command will happen only if the prepare() call returns ActionReport.ExitCode.SUCCESS
 on DAS.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the command's context</dd>
<dd><code>parameters</code> - parameters to the commands.</dd>
</dl>
</li>
</ul>
<a name="undo-org.glassfish.api.admin.AdminCommandContext-org.glassfish.api.admin.ParameterMap-java.util.List-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>undo</h4>
<pre>void&nbsp;undo(<a href="../../../../org/glassfish/api/admin/AdminCommandContext.html" title="interface in org.glassfish.api.admin">AdminCommandContext</a>&nbsp;context,
          <a href="../../../../org/glassfish/api/admin/ParameterMap.html" title="class in org.glassfish.api.admin">ParameterMap</a>&nbsp;parameters,
          <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../com/sun/enterprise/config/serverbeans/Server.html" title="interface in com.sun.enterprise.config.serverbeans">Server</a>&gt;&nbsp;instances)</pre>
<div class="block">Undo a previously successful execution of the command implementation. The context
 for undoing the administrative operation should be obtained from either the
 parameters passed to the command execution or the command instance context.
 The list of servers indicates to the command implementation on which servers the command succeeded
 The command implementation is guaranteed that the  <code>#undo(AdminCommandContext, ParameterMap, List<Server>)</code>
 is called on DAS if the main command execution failed on one instance but it is the responsiblity of the command
 implementation to invoke remote instances to do the actual undo if required</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the command's context</dd>
<dd><code>parameters</code> - parameters passed to the command.</dd>
<dd><code>instances</code> - instances on which the command succeeded</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UndoableCommand.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/glassfish/internal/api/Target.html" title="class in org.glassfish.internal.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/glassfish/internal/api/Visibility.html" title="annotation in org.glassfish.internal.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/glassfish/internal/api/UndoableCommand.html" target="_top">Frames</a></li>
<li><a href="UndoableCommand.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
